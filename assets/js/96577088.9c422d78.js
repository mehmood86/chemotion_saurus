"use strict";(self.webpackChunkchemotion_saurus=self.webpackChunkchemotion_saurus||[]).push([[331],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return u}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=c(n),u=i,h=p["".concat(s,".").concat(u)]||p[u]||m[u]||r;return n?a.createElement(h,o(o({ref:t},d),{},{components:n})):a.createElement(h,o({ref:t},d))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var c=2;c<r;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},938:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return d},default:function(){return p}});var a=n(7462),i=n(3366),r=(n(7294),n(3905)),o=["components"],l={id:"settings",title:"Configuration",sidebar_label:"Configuration",slug:"settings"},s=void 0,c={unversionedId:"eln/settings",id:"eln/settings",title:"Configuration",description:"This page is still being edited and reviewed.",source:"@site/docs/eln/configuration.mdx",sourceDirName:"eln",slug:"/eln/settings",permalink:"/chemotionsaurus/docs/next/eln/settings",editUrl:"https://github.com/ComPlat/chemotion_saurus/edit/master/docs/eln/configuration.mdx",tags:[],version:"current",lastUpdatedBy:"Danny Truong",lastUpdatedAt:1650478097,formattedLastUpdatedAt:"4/20/2022",frontMatter:{id:"settings",title:"Configuration",sidebar_label:"Configuration",slug:"settings"},sidebar:"elnSidebar",previous:{title:"Configuration",permalink:"/chemotionsaurus/docs/next/category/configuration"},next:{title:"System check",permalink:"/chemotionsaurus/docs/next/eln/system_check"}},d=[{value:"User name_abbreviation",id:"user-name_abbreviation",children:[],level:2},{value:"SciFinder<sup>n</sup>",id:"scifindern",children:[],level:2},{value:"Secret key",id:"secret-key",children:[],level:2},{value:"Structure editor",id:"structure-editor",children:[{value:"Currently supported editors",id:"currently-supported-editors",children:[],level:4}],level:2},{value:"Set hostname for file download",id:"set-hostname-for-file-download",children:[],level:2},{value:"e-mail-service (optional)",id:"e-mail-service-optional",children:[],level:2},{value:"File collector",id:"file-collector",children:[{value:"e-mail-attachement collection",id:"e-mail-attachement-collection",children:[],level:3},{value:"File collection",id:"file-collection",children:[],level:3},{value:"Data-collector settings",id:"data-collector-settings",children:[],level:3}],level:2},{value:"External services",id:"external-services",children:[{value:"Chem-Spectra-App",id:"chem-spectra-app",children:[{value:"Installation",id:"installation",children:[],level:4},{value:"Configuration in Chemotion-ELN",id:"configuration-in-chemotion-eln",children:[],level:4},{value:"Automatic startup in crontab",id:"automatic-startup-in-crontab",children:[],level:4}],level:3},{value:"VNC",id:"vnc",children:[],level:3},{value:"Onlyoffice",id:"onlyoffice",children:[],level:3},{value:"Computed properties",id:"computed-properties",children:[],level:3}],level:2},{value:"Dynamic Welcome e-mail and Message (optional)",id:"dynamic-welcome-e-mail-and-message-optional",children:[],level:2}],m={toc:d};function p(e){var t=e.components,l=(0,i.Z)(e,o);return(0,r.kt)("wrapper",(0,a.Z)({},m,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Info ")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"This page is still being edited and reviewed."))),(0,r.kt)("h2",{id:"user-name_abbreviation"},"User name_abbreviation"),(0,r.kt)("p",null,"Name abbreviation, like e-mails, are unique in the DB and can be used for sign in.\nThe length of it can be defined in the ",(0,r.kt)("inlineCode",{parentName:"p"},"user_props.yml")," configuration file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# from the application dir (/var/www/chemotion_ELN/current) copy the config file \ncp config/user_props.yml.example config/user_props.yml\n\n# edit it\nvim config/user_props.yml\n\n# restart the application (assuming Passenger is being used)\ntouch tmp/restart.txt\n\n# keep the configuration for future Chemotion ELN updates (assuming Capistrano is used)\nmv config/user_props.yml /var/www/chemotion_ELN/shared/config/user_props.yml\nln -s  /var/www/chemotion_ELN/shared/config/user_props.yml /var/www/chemotion_ELN/current/config/user_props.yml\n")),(0,r.kt)("h2",{id:"scifindern"},"SciFinder",(0,r.kt)("sup",null,"n")),(0,r.kt)("p",null,"Chemotion ELN provides users with an easy way to search in CAS SciFinder",(0,r.kt)("sup",null,"n"),". To enable this feature, the necessary information needs to be configured in the ",(0,r.kt)("inlineCode",{parentName:"p"},"scfinder_n.yml")," file."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"scfinder_n.yml")," configuration file is in the ",(0,r.kt)("inlineCode",{parentName:"p"},"config")," folder. To create the file for the first time,"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# from the application dir (/var/www/chemotion_ELN/current) copy the config file \ncp config/scfinder_n.yml.example config/scfinder_n.yml\n\n# edit it\nvim config/scfinder_n.yml\n\n# restart the application (assuming Passenger is being used)\ntouch tmp/restart.txt\n\n# keep the configuration for future Chemotion ELN updates (assuming Capistrano is used)\nmv config/scfinder_n.yml /var/www/chemotion_ELN/shared/config/scfinder_n.yml\nln -s  /var/www/chemotion_ELN/shared/config/scfinder_n.yml /var/www/chemotion_ELN/current/config/scfinder_n.yml\n")),(0,r.kt)("p",null,"scfinder_n.yml:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"### example of scfinder_n.yml\nproduction:\n  :provider:\n    :metadata: 'api/oauth2/metadata' # DON'T CHANGE\n    :host: 'https://scifinder-n.cas.org' # DON'T CHANGE\n    :client_id: '' # your client id, issued by CAS SciFinder\n    :redirect: 'sfn_cb' # DON'T CHANGE\n    :redirect_host: 'localhost' # your server \n")),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"NOTE")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"After editing the scfinder_n.yml the service needs to be restarted."))),(0,r.kt)("h2",{id:"secret-key"},"Secret key"),(0,r.kt)("p",null,"used for cookie encryption.\nstored in ",(0,r.kt)("inlineCode",{parentName:"p"},".env")," file"),(0,r.kt)("h2",{id:"structure-editor"},"Structure editor"),(0,r.kt)("p",null,"Chemotion ELN uses Ketcher as the default structure editor. To use other editors, configure the required files and the licence (if needed) in the ",(0,r.kt)("inlineCode",{parentName:"p"},"structure_editors.yml")," file."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"structure_editors.yml")," configuration file is in the ",(0,r.kt)("inlineCode",{parentName:"p"},"config")," folder. To create the file for the first time,"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# from the application dir (/var/www/chemotion_ELN/current) copy the config file \ncp config/structure_editors.yml.example config/structure_editors.yml\n\n# edit it\nvim config/structure_editors.yml\n\n# restart the application (assuming Passenger is being used)\ntouch tmp/restart.txt\n\n# keep the configuration for future Chemotion ELN updates (assuming Capistrano is used)\nmv config/structure_editors.yml /var/www/chemotion_ELN/shared/config/structure_editors.yml\nln -s  /var/www/chemotion_ELN/shared/config/structure_editors.yml /var/www/chemotion_ELN/current/config/structure_editors.yml\n")),(0,r.kt)("h4",{id:"currently-supported-editors"},"Currently supported editors"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Version"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ChemDraw JS"),(0,r.kt)("td",{parentName:"tr",align:null},"17, 20")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Ketcher 2"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://drive.google.com/drive/folders/1TZLEVyKs0Fhz8vmjOHK6Xii8MFfrifFI?usp=sharing"},"2.4"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Marvin JS"),(0,r.kt)("td",{parentName:"tr",align:null},"21.8")))),(0,r.kt)("p",null,"structure_editors.yml:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"### example of structure_editors.yml\nproduction:\n  :editors:\n    :chemdraw:\n      :label: 'ChemDrawJS'\n      :license: '/chemdraw/ChemDraw-JS-License.xml' # license file of ChemDraw\n      :extJs: ['/chemdraw/chemdrawweb/chemdrawweb.js'] # js of ChemDraw\n    :ketcher2:\n      :label: 'Ketcher 2'\n      :extSrc: '/editors/ketcher/index.html'\n    :marvinjs:\n      :label: 'MarvinJS'\n      :license: 'license file'  # license file of MarvinJS\n      :extJs: ['external javascript files to be included'] # js of MarvinJS\n      :extSrc: 'external file' # file of MarvinJS\n")),(0,r.kt)("p",null,"\ud83d\udca1 ",(0,r.kt)("b",null,"Tip:")," To install ChemDraw JS or Ketcher 2 library, unzip the (library).zip, and then copy the sub-folders and files to the folder which the system loads scripts."),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"NOTE")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"After editing the structure_editors.yml the service needs to be restarted."))),(0,r.kt)("h2",{id:"set-hostname-for-file-download"},"Set hostname for file download"),(0,r.kt)("p",null,"In order for file downloads (e. g., in exporting ",(0,r.kt)("a",{parentName:"p",href:"/docs/eln/collections"},"collections"),") to work correctly, you have to configure your hostname for Chemtion ELN. You can do that in the ",(0,r.kt)("inlineCode",{parentName:"p"},".env")," file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"HOST='my.hostname.com'\n")),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"NOTE")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"If ",(0,r.kt)("inlineCode",{parentName:"p"},"HOST")," is not set, Chemotion ELN may also use the value of ",(0,r.kt)("inlineCode",{parentName:"p"},"SMTP_DOMAIN"),"."))),(0,r.kt)("h2",{id:"e-mail-service-optional"},"e-mail-service (optional)"),(0,r.kt)("p",null,"For sending users account e-mail confirmation request, reset password instructions, or other notifications."),(0,r.kt)("p",null,"e-mail configuration parameters are set as environment variables in the ",(0,r.kt)("inlineCode",{parentName:"p"},".env")," file.\nbelow a list of available parameters:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# default url of your Chemotion ELN for http links in e-mails:\nSMTP_HOST='sld.tld' \n# senders e-mail:\nDEVISE_SENDER='no-reply@sld.tld' \n\n## SMTP config \n# Remote mail server\nSMTP_ADDRESS='smtp.sld.tld'\nSMTP_PORT=587\n# login user name & password:\nSMTP_USERNAME='no-reply@sld.tld' \nSMTP_PASSWORD='s3cr3tPW'\n# optional, HELO domain\nSMTP_DOMAIN='sld.tld'\n# detect STARTTLS\nSMTP_TLS=true\n# authentication type ('plain' 'login' (Base64 encoded) or 'cram_md5')\nSMTP_AUTH='plain'\n# how OpenSSL checks the certificate  ('none' or 'peer') \nSMTP_SSL_MODE='none'\n")),(0,r.kt)("p",null,"See ",(0,r.kt)("a",{parentName:"p",href:"https://guides.rubyonrails.org/action_mailer_basics.html#action-mailer-configuration"},"rails docs")," for an explanation of the parameters."),(0,r.kt)("h2",{id:"file-collector"},"File collector"),(0,r.kt)("p",null,"This is an optional service to collect data files and distribute them to the Chemotion ELN inbox of the respective users."),(0,r.kt)("p",null,"(see the ",(0,r.kt)("a",{parentName:"p",href:"devices"},"devices overview")," or ",(0,r.kt)("a",{parentName:"p",href:"https://doi.org/10.1016/j.acax.2019.100007"},"doi: 10.1016/j.acax.2019.100007 "),")"),(0,r.kt)("p",null,"Two options are available:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"collecting attachment files from e-mails"),(0,r.kt)("li",{parentName:"ul"},"collecting file or folder from local drives or over scp")),(0,r.kt)("h3",{id:"e-mail-attachement-collection"},"e-mail-attachement collection"),(0,r.kt)("p",null,"The Chemotion ELN-app should be given access to an e-mail account in which it will regularly check for incoming e-mails and collect the attachments.\nThe attachments are then distributed to Chemotion ELN user by matching the additional addressee present in the ",(0,r.kt)("strong",{parentName:"p"},"To:")," or ",(0,r.kt)("strong",{parentName:"p"},"CC:")," fied of the e-mail. The sender's e-mail address should also one of an Chemotion ELN-registered device. "),(0,r.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"danger")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"All new incoming e-mails are processed and discarded.\nIf the sender and other addresssees are unknown to the Chemotion ELN (e-mails registered to Chemotion ELN accounts), then the e-mail will be directly deleted."))),(0,r.kt)("h3",{id:"file-collection"},"File collection"),(0,r.kt)("p",null,"Files can be collected from remote storages and distributed to specific user based on the file-name matching the user's name abbreviation."),(0,r.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"danger")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The directories watched by the collector service will be emptied at each collection i. e. all files within the watched directories will be removed."))),(0,r.kt)("h3",{id:"data-collector-settings"},"Data-collector settings"),(0,r.kt)("p",null,"Configure the frequency for collecting the files, as well as the e-mail access in the ",(0,r.kt)("inlineCode",{parentName:"p"},"config/datacollectors.yml")," file.\nThe background worker will collect the files at the frequencies set.\nIf login credentials are needed, those are set in the configuration file as well."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"### example of configdatacollector.yml \nproduction:\n  :services:\n    - :name: 'mailcollector'\n      :cron: '5,20,35,50 * * * *' # every 15 minutes starting a xx:05\n    - :name: 'folderwatchersftp'\n      :every: 5 # minutes\n      :watcher_sleep: 30 # seconds\n    - :name: 'folderwatcherlocal'\n      :every: 5 # minutes\n      :watcher_sleep: 30 # seconds\n    - :name: 'filewatchersftp'\n      :every: 2 # minutes\n    - :name: 'filewatcherlocal'\n      :every: 2 # minutes\n\n  ## Chemotion ELN e-mail account\n  :mailcollector:\n    :server: 'imap.server.de'\n    :mail_address: \"service@mail\"\n    :password: \"password\"\n    # :port: 993 default\n    # :ssl: true default\n    :aliases:\n      - 'alias_one@kit.edu'\n      - 'alias_two@kit.edu'\n  \n  ## File collection over ssh with password \n  :sftpusers:\n    - :user: 'user1'\n      :password: 'pass'\n    - :user: 'user2'\n      :password: 'pass'\n\n  # Dir of ssh keys for data collection over sftp\n  :keydir: 'config/data_collector_keys'\n\n  # Allowlist of dir paths for local data collection\n  :localcollectors:\n    - :path: '<%= Rails.root.join(*%w[tmp datacollector]).to_s %>'\n")),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"NB")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"After editing the datacollectors.yml the worker service (DelayedJob) needs to be restarted."))),(0,r.kt)("p",null,"For each registered Device, a collection job can be set up through the administrator interface:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"adminui-datacollector",src:n(1130).Z,width:"1315",height:"815"})),(0,r.kt)("h2",{id:"external-services"},"External services"),(0,r.kt)("h3",{id:"chem-spectra-app"},"Chem-Spectra-App"),(0,r.kt)("h4",{id:"installation"},"Installation"),(0,r.kt)("p",null,"Use this installation guide: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/ComPlat/chem-spectra-app/blob/master/INSTALL.md"},"https://github.com/ComPlat/chem-spectra-app/blob/master/INSTALL.md")),(0,r.kt)("h4",{id:"configuration-in-chemotion-eln"},"Configuration in Chemotion-ELN"),(0,r.kt)("p",null,"To configure Chemotion-ELN to connect to Chem-Spectra, create a configuration file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# from the application dir (/var/www/chemotion_ELN/current) copy the config file \ncd /var/www/chemotion_ELN/current\ncp config/spectra.yml.example config/spectra.yml\n")),(0,r.kt)("p",null,"If you followed the above installation guide you may edit ",(0,r.kt)("inlineCode",{parentName:"p"},"spectra.yml")," as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"production:\n  :url: '127.0.0.1'\n  :port: '3007'\n")),(0,r.kt)("p",null,"Restart the application (assuming Passenger is being used):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"touch tmp/restart.txt\n")),(0,r.kt)("p",null,"To keep the configuration for future Chemotion ELN updates (assuming Capistrano is used):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"mv config/spectra.yml /var/www/chemotion_ELN/shared/config/spectra.yml\nln -s  /var/www/chemotion_ELN/shared/config/spectra.yml /var/www/chemotion_ELN/current/config/spectra.yml\n")),(0,r.kt)("h4",{id:"automatic-startup-in-crontab"},"Automatic startup in crontab"),(0,r.kt)("p",null,"To make sure Chem-Spectra is started on reboot you can use this BASH script in your root crontab (if required, adapt Chemotion-ELN username and home directory):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'#!/bin/bash\n\nsudo -H -u production bash -c "cd /home/production/chem-spectra-app && \\\n  source /home/production/anaconda3/bin/activate chem-spectra && \\\n  gunicorn -w 4 -b 0.0.0.0:3007 server:app --daemon"\n\ndocker run --detach --name msconvert_docker \\\n    --rm -it \\\n    -e WINEDEBUG=-all \\\n    -v /home/production/chem-spectra-app/chem_spectra/tmp:/data \\   ## Modify path according to your installation\n    chambm/pwiz-skyline-i-agree-to-the-vendor-licenses bash\n')),(0,r.kt)("h3",{id:"vnc"},"VNC"),(0,r.kt)("p",null,"Access remote Desktops with VNC using websockify"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"adminui-vnc",src:n(8676).Z,width:"711",height:"361"})),(0,r.kt)("p",null,"installation: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/novnc/websockify"},"https://github.com/novnc/websockify")),(0,r.kt)("p",null,"A VNC server needs to be installed on each remote machine."),(0,r.kt)("p",null,"setting: through the ",(0,r.kt)("a",{parentName:"p",href:"/docs/eln/admin_ui/novnc_settings"},"Administrator-interface")),(0,r.kt)("h3",{id:"onlyoffice"},"Onlyoffice"),(0,r.kt)("p",null,"Install ",(0,r.kt)("a",{parentName:"p",href:"https://helpcenter.onlyoffice.com/installation/docs-community-install-ubuntu.aspx?_ga=2.2091185.1060566386.1612303438-123622021.1612303437"},"OnlyOffice")," instance on a server:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# from the application dir (/var/www/chemotion_ELN/current) copy the config file \ncp config/editors.yml.example config/editors.yml\n\n# edit it\nvim config/editors.yml\n\n# restart the application (assuming Passenger is being used)\ntouch tmp/restart.txt\n\n# keep the configuration for future Chemotion ELN updates (assuming Capistrano is used)\nmv config/editors.yml /var/www/chemotion_ELN/shared/config/editors.yml\nln -s  /var/www/chemotion_ELN/shared/config/editors.yml /var/www/chemotion_ELN/current/config/editors.yml\n")),(0,r.kt)("h3",{id:"computed-properties"},"Computed properties"),(0,r.kt)("p",null,"source:\ninstallation:  "),(0,r.kt)("p",null,"hint: Turbomols license needed\nsettings the computed-properties can be done directly from the Admin-UI, and are saved in the DB"),(0,r.kt)("p",null,"Application will need to be restarted"),(0,r.kt)("h2",{id:"dynamic-welcome-e-mail-and-message-optional"},"Dynamic Welcome e-mail and Message (optional)"),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"This feature is still in Beta version."))),(0,r.kt)("p",null,"This configuration enables sending a welcome message as an e-mail to the new users upon registration. It also displays the same content as a welcome message at the home page. The content is dynamic and can be modified and updated anytime."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"adminui-welcomemessage",src:n(4728).Z,width:"1869",height:"730"})),(0,r.kt)("p",null,"The message is rendered via .md file, you can find the sample file ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/ComPlat/chemotion_ELN/blob/development-5/public/welcome-message-sample.md"},"here."),"\nIn order to configure this, you just need to create a similar file as above in the same ",(0,r.kt)("inlineCode",{parentName:"p"},"public")," directory named as ",(0,r.kt)("inlineCode",{parentName:"p"},"welcome-message.md"),". You can copy the content from the sample file and modify the message as you wish."),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Restarting of server might be required if you are adding the file to an already running instance."))))}p.isMDXComponent=!0},8676:function(e,t,n){t.Z=n.p+"assets/images/ELN-VNC-94b3b88ffbeb56d8a32fbf1e17b4f71b.png"},1130:function(e,t,n){t.Z=n.p+"assets/images/adminui-datacollector-4a280e74b037d021b2109a53d4d59708.png"},4728:function(e,t,n){t.Z=n.p+"assets/images/adminui-welcomemessage-2d487cce1fe9b72875a6cbc91e162f99.PNG"}}]);