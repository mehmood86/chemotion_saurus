"use strict";(self.webpackChunkchemotion_saurus=self.webpackChunkchemotion_saurus||[]).push([[7334],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return u}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=c(n),u=i,h=m["".concat(s,".").concat(u)]||m[u]||d[u]||r;return n?a.createElement(h,o(o({ref:t},p),{},{components:n})):a.createElement(h,o({ref:t},p))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var c=2;c<r;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4630:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return p},default:function(){return m}});var a=n(7462),i=n(3366),r=(n(7294),n(3905)),o=["components"],l={id:"settings",title:"Configuration",sidebar_label:"Configuration",slug:"settings"},s=void 0,c={unversionedId:"eln/settings",id:"version-1.1.0/eln/settings",title:"Configuration",description:"User name_abbreviation",source:"@site/versioned_docs/version-1.1.0/eln/configuration.md",sourceDirName:"eln",slug:"/eln/settings",permalink:"/chemotionsaurus/docs/1.1.0/eln/settings",editUrl:"https://github.com/ComPlat/chemotion_saurus/edit/master/versioned_docs/version-1.1.0/eln/configuration.md",tags:[],version:"1.1.0",lastUpdatedBy:"Danny Truong",lastUpdatedAt:1649919296,formattedLastUpdatedAt:"4/14/2022",frontMatter:{id:"settings",title:"Configuration",sidebar_label:"Configuration",slug:"settings"},sidebar:"version-1.1.0/elnSidebar",previous:{title:"Dockerized Development",permalink:"/chemotionsaurus/docs/1.1.0/eln/DevDocker"},next:{title:"System check",permalink:"/chemotionsaurus/docs/1.1.0/eln/system_check"}},p=[{value:"User name_abbreviation",id:"user-name_abbreviation",children:[],level:2},{value:"Secret key",id:"secret-key",children:[],level:2},{value:"Email-service (optional)",id:"email-service-optional",children:[],level:2},{value:"File collector",id:"file-collector",children:[{value:"Email-attachement collection",id:"email-attachement-collection",children:[],level:3},{value:"File collection",id:"file-collection",children:[],level:3},{value:"Data-collector settings",id:"data-collector-settings",children:[],level:3}],level:2},{value:"External services",id:"external-services",children:[{value:"Chemspectra-App",id:"chemspectra-app",children:[],level:3},{value:"VNC",id:"vnc",children:[],level:3},{value:"Onlyoffice",id:"onlyoffice",children:[],level:3},{value:"Computed properties",id:"computed-properties",children:[],level:3}],level:2}],d={toc:p};function m(e){var t=e.components,l=(0,i.Z)(e,o);return(0,r.kt)("wrapper",(0,a.Z)({},d,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"user-name_abbreviation"},"User name_abbreviation"),(0,r.kt)("p",null,"Name abbreviation, like emails, are unique in the DB and can be used for sign in.\nthe length of if can be defined in the user_props.yml config file"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# from the application dir (/var/www/chemotion_ELN/current) copy the config file \ncp config/user_props.yml.example config/user_props.yml\n\n# edit it\nvim config/user_props.yml\n\n# restart the application (assuming Passenger is being used)\ntouch tmp/restart.txt\n\n# keep the configuration for future ELN updates (assuming Capistrano is used)\nmv config/user_props.yml /var/www/chemotion_ELN/shared/config/user_props.yml\nln -s  /var/www/chemotion_ELN/shared/config/user_props.yml /var/www/chemotion_ELN/current/config/user_props.yml\n")),(0,r.kt)("h2",{id:"secret-key"},"Secret key"),(0,r.kt)("p",null,"used for cookie encryption.\nstored in ",(0,r.kt)("strong",{parentName:"p"},".env")," file"),(0,r.kt)("h2",{id:"email-service-optional"},"Email-service (optional)"),(0,r.kt)("p",null,"For sending users account email confirmation request, reset password instructions, or other notifications."),(0,r.kt)("p",null,"Email configuration parameters are set as environment variables in the ",(0,r.kt)("strong",{parentName:"p"},".env")," file.\nbelow a list of available parameters:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# default url of your ELN for http links in emails:\nSMTP_HOST='sld.tld' \n# senders email:\nDEVISE_SENDER='no-reply@sld.tld' \n\n## SMTP config \n# Remote mail server\nSMTP_ADDRESS='smtp.sld.tld'\nSMTP_PORT=587\n# login user name & password:\nSMTP_USERNAME='no-reply@sld.tld' \nSMTP_PASSWORD='s3cr3tPW'\n# optional, HELO domain\nSMTP_DOMAIN='sld.tld'\n# detect STARTTLS\nSMTP_TLS=true\n# authentication type ('plain' 'login' (Base64 encoded) or 'cram_md5')\nSMTP_AUTH='plain'\n# how OpenSSL checks the certificate  ('none' or 'peer') \nSMTP_SSL_MODE='none'\n\n\n")),(0,r.kt)("p",null,"See ",(0,r.kt)("a",{parentName:"p",href:"https://guides.rubyonrails.org/action_mailer_basics.html#action-mailer-configuration"},"rails docs")," for an explanation of the parameters."),(0,r.kt)("h2",{id:"file-collector"},"File collector"),(0,r.kt)("p",null,"This is an optional service to collect data files and distribute them to the ELN inbox of the respective users."),(0,r.kt)("p",null,"(see the ",(0,r.kt)("a",{parentName:"p",href:"devices"},"devices overview")," or ",(0,r.kt)("a",{parentName:"p",href:"https://doi.org/10.1016/j.acax.2019.100007"},"doi: 10.1016/j.acax.2019.100007 "),")"),(0,r.kt)("p",null,"Two options are available:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"collecting attachment files from emails."),(0,r.kt)("li",{parentName:"ul"},"collecting file or folder from local drives or over scp")),(0,r.kt)("h3",{id:"email-attachement-collection"},"Email-attachement collection"),(0,r.kt)("p",null,"The ELN-app should be given access to an email account in which it will regularly check for incoming emails and collect the attachments.\nThe attachments are then distributed to ELN user by matching the additional addressee present in the ",(0,r.kt)("strong",{parentName:"p"},"To:")," or ",(0,r.kt)("strong",{parentName:"p"},"CC:")," fied of the email. The sender's email address should also one of an ELN-registered device. "),(0,r.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"danger")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"All new incoming emails are processed and discarded.\nIf the sender and other addresssees are unknown to the ELN (emails registered to ELN accounts), then the email will be directly deleted."))),(0,r.kt)("h3",{id:"file-collection"},"File collection"),(0,r.kt)("p",null,"Files can be collected from remote storages and distributed to specific user based on the file-name matching the user's name abbreviation."),(0,r.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"danger")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The directories watched by the collector service will be emptied at each collection i.e. all files within the watched directories will be removed."))),(0,r.kt)("h3",{id:"data-collector-settings"},"Data-collector settings"),(0,r.kt)("p",null,"Configure the frequency for collecting the files, as well as the email access in the config/datacollectors.yml file.\nThe background worker will collect the files at the frequencies set.\nIf login credentials are needed, those are set in the configuration file as well."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"### example of configdatacollector.yml \nproduction:\n  :services:\n    - :name: 'mailcollector'\n      :cron: '5,20,35,50 * * * *' # every 15 minutes starting a xx:05\n    - :name: 'folderwatchersftp'\n      :every: 5 # minutes\n      :watcher_sleep: 30 # seconds\n    - :name: 'folderwatcherlocal'\n      :every: 5 # minutes\n      :watcher_sleep: 30 # seconds\n    - :name: 'filewatchersftp'\n      :every: 2 # minutes\n    - :name: 'filewatcherlocal'\n      :every: 2 # minutes\n\n  ## ELN email account\n  :mailcollector:\n    :server: 'imap.server.de'\n    :mail_address: \"service@mail\"\n    :password: \"password\"\n    # :port: 993 default\n    # :ssl: true default\n    :aliases:\n      - 'alias_one@kit.edu'\n      - 'alias_two@kit.edu'\n  \n  ## File collection over ssh with password \n  :sftpusers:\n    - :user: 'user1'\n      :password: 'pass'\n    - :user: 'user2'\n      :password: 'pass'\n\n  # Dir of ssh keys for data collection over sftp\n  :keydir: 'config/data_collector_keys'\n\n  # Allowlist of dir paths for local data collection\n  :localcollectors:\n    - :path: '<%= Rails.root.join(*%w[tmp datacollector]).to_s %>'\n")),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"NB")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"After editing the datacollectors.yml the worker service (DelayedJob) needs to be restarted."))),(0,r.kt)("p",null,"For each registered Device, a collection job can be set up through the administrator interface:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"adminui-datacollector",src:n(1130).Z,width:"1315",height:"815"})),(0,r.kt)("h2",{id:"external-services"},"External services"),(0,r.kt)("h3",{id:"chemspectra-app"},"Chemspectra-App"),(0,r.kt)("p",null,"source: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/complat/chem-spectra-app"},"https://github.com/complat/chem-spectra-app")),(0,r.kt)("p",null,"installation: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/ComPlat/chem-spectra-app/blob/master/INSTALL.md"},"https://github.com/ComPlat/chem-spectra-app/blob/master/INSTALL.md")),(0,r.kt)("p",null,"setting: "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# from the application dir (/var/www/chemotion_ELN/current) copy the config file \ncp config/spectra.yml.example config/spectra.yml\n\n# edit it\nvim config/spectra.yml\n\n# restart the application (assuming Passenger is being used)\ntouch tmp/restart.txt\n\n# keep the configuration for future ELN updates (assuming Capistrano is used)\nmv config/spectra.yml /var/www/chemotion_ELN/shared/config/spectra.yml\nln -s  /var/www/chemotion_ELN/shared/config/spectra.yml /var/www/chemotion_ELN/current/config/spectra.yml\n")),(0,r.kt)("h3",{id:"vnc"},"VNC"),(0,r.kt)("p",null,"Access  remote Desktop with VNC using websockify"),(0,r.kt)("p",null,"installation: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/novnc/websockify"},"https://github.com/novnc/websockify")),(0,r.kt)("p",null,"setting: through the Administrator-interface"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"adminui-vnc",src:n(9974).Z,width:"1462",height:"992"})),(0,r.kt)("p",null,"Access to the remote can then be given to a user by associating it and the device within a user-group.\nAdministrators can assign devices and users to exisiting group.\n",(0,r.kt)("img",{alt:"adminui-group",src:n(1484).Z,width:"1021",height:"304"})),(0,r.kt)("p",null,"User can assign others to the groups they manage."),(0,r.kt)("h3",{id:"onlyoffice"},"Onlyoffice"),(0,r.kt)("p",null,"install  ",(0,r.kt)("a",{parentName:"p",href:"https://helpcenter.onlyoffice.com/installation/docs-community-install-ubuntu.aspx?_ga=2.2091185.1060566386.1612303438-123622021.1612303437"},"OnlyOffice")," instance on a server"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# from the application dir (/var/www/chemotion_ELN/current) copy the config file \ncp config/editors.yml.example config/editors.yml\n\n# edit it\nvim config/editors.yml\n\n# restart the application (assuming Passenger is being used)\ntouch tmp/restart.txt\n\n# keep the configuration for future ELN updates (assuming Capistrano is used)\nmv config/editors.yml /var/www/chemotion_ELN/shared/config/editors.yml\nln -s  /var/www/chemotion_ELN/shared/config/editors.yml /var/www/chemotion_ELN/current/config/editors.yml\n")),(0,r.kt)("h3",{id:"computed-properties"},"Computed properties"),(0,r.kt)("p",null,"source:\ninstallation:  "),(0,r.kt)("p",null,"hint: Turbomols license needed\nsettings the computed-properties can be done directly from the Admin-UI, and are saved in the DB"),(0,r.kt)("p",null,"Application will need to be restarted"))}m.isMDXComponent=!0},1130:function(e,t,n){t.Z=n.p+"assets/images/adminui-datacollector-4a280e74b037d021b2109a53d4d59708.png"},1484:function(e,t,n){t.Z=n.p+"assets/images/adminui-group-2ec3de66c6bbc3809d883eb248899173.png"},9974:function(e,t,n){t.Z=n.p+"assets/images/adminui-vnc-7f48f446f127319999ebee9b9c32a95b.png"}}]);