<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/chemotionsaurus/blog/rss.xml" title="Chemotion RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/chemotionsaurus/blog/atom.xml" title="Chemotion Atom Feed"><title data-react-helmet="true">Docker Installation | Chemotion</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://chemotion.net/chemotionsaurus/docs/next/eln/docker_installation"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Docker Installation | Chemotion"><meta data-react-helmet="true" name="description" content="Documentation and processes are being reworked and improved at the moment. It may happen that you miss information. If you face problems, please let us know, we are there to support you. You may also contact us directly if you plan to install Chemotion."><meta data-react-helmet="true" property="og:description" content="Documentation and processes are being reworked and improved at the moment. It may happen that you miss information. If you face problems, please let us know, we are there to support you. You may also contact us directly if you plan to install Chemotion."><link data-react-helmet="true" rel="icon" href="/chemotionsaurus/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://chemotion.net/chemotionsaurus/docs/next/eln/docker_installation"><link data-react-helmet="true" rel="alternate" href="https://chemotion.net/chemotionsaurus/docs/next/eln/docker_installation" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://chemotion.net/chemotionsaurus/docs/next/eln/docker_installation" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://undefined-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/chemotionsaurus/assets/css/styles.962639bc.css">
<link rel="preload" href="/chemotionsaurus/assets/js/runtime~main.cd4bfac8.js" as="script">
<link rel="preload" href="/chemotionsaurus/assets/js/main.63004e89.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/chemotionsaurus/"><div class="navbar__logo"><img src="/chemotionsaurus/img/favicon.ico" alt="Chemotion" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/chemotionsaurus/img/favicon.ico" alt="Chemotion" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Chemotion</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Documentation</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/chemotionsaurus/docs/eln/intro">ELN</a></li><li><a class="dropdown__link" href="/chemotionsaurus/docs/repo/videos_repo">Repository</a></li><li><a class="dropdown__link" href="/chemotionsaurus/docs/docu/Set Up">About this documentation</a></li></ul></div><a class="navbar__item navbar__link" href="/chemotionsaurus/blog/newsroom">Newsroom</a></div><div class="navbar__items navbar__items--right"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search Documentation"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search Documentation</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/chemotionsaurus/docs/next/category/installation">ELN</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active hasHref_VCh3" aria-current="page" tabindex="0" href="/chemotionsaurus/docs/next/category/installation">Installation</a><button aria-label="Toggle the collapsible sidebar category &#x27;Installation&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" tabindex="0" href="/chemotionsaurus/docs/next/eln/native_installation">Production</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/chemotionsaurus/docs/next/eln/native_installation">Native installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/chemotionsaurus/docs/next/eln/docker_installation">Docker installation</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/chemotionsaurus/docs/next/eln/development_native_installation">Development</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" tabindex="0" href="/chemotionsaurus/docs/next/category/development">Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;Development&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" tabindex="0" href="/chemotionsaurus/docs/next/category/configuration">Configuration</a><button aria-label="Toggle the collapsible sidebar category &#x27;Configuration&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" tabindex="0" href="/chemotionsaurus/docs/next/category/manual">Manual</a><button aria-label="Toggle the collapsible sidebar category &#x27;Manual&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" tabindex="0" href="/chemotionsaurus/docs/next/category/admin-ui">Admin UI</a><button aria-label="Toggle the collapsible sidebar category &#x27;Admin UI&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" tabindex="0" href="/chemotionsaurus/docs/next/category/device-integration">Device integration</a><button aria-label="Toggle the collapsible sidebar category &#x27;Device integration&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/chemotionsaurus/docs/next/eln/faq_eln">FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/chemotionsaurus/docs/next/eln/specific_contact">Contact</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_cwdi"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_xORG"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Chemotion<!-- --> <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/chemotionsaurus/docs/eln/docker_installation">latest version</a></b> (<!-- -->1.1.1<!-- -->).</div></div><div class="docItemContainer_vinB"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->Next</span><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Docker Installation</h1></header><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Documentation and processes are being reworked and improved at the moment. It may happen that you miss information. If you face problems, please let us know, we are there to support you. You may also <a href="/chemotionsaurus/docs/next/eln/specific_contact">contact</a> us directly if you plan to install Chemotion. </p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="version-112p220401">Version 1.1.2p220401<a class="hash-link" href="#version-112p220401" title="Direct link to heading">​</a></h2><p>To install version 1.1.2 of the ELN, we introduce the container version 1.1.2p220401. Please note, the naming convention cahnged to now encode the ELN version (1.1.2) followed by a single character to denote the intended use (&quot;p&quot; for production, &quot;d&quot; for development and &quot;e&quot; for experimental) followed by the version of the Docker middleware in the form of &quot;YYMMRR&quot; with RR being an increaseing integer.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>From this version onwards, spectra analysis services will be included into the default setup. If you do not like that, you can edit the Compose file accordingly.  </p></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>From this version onwards, we rely on Docker volumes to preserve data. Your user data will be stored in the volumes <code>chemotion_data</code> and <code>chemotion_db</code>. DO NOT delete them if you like your stuff. No backup, no pity.</p></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="fresh-installation">Fresh Installation<a class="hash-link" href="#fresh-installation" title="Direct link to heading">​</a></h3><p>To install this version on a blank system, follow these steps:</p><ul><li>download the <code>docker-compose.yml</code> to a directory of your choice:</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">wget https://raw.githubusercontent.com/ptrxyz/chemotion/main/new-build/release/1.1.2p220401/docker-compose.yml</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>download all images and create the containers, data volumes and networks by running this command in the same folder you downloaded the compose file to:</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose create</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Note: depending on your Compose version you might get a deprecation warning. The warning can be ignored for now, in the future, <code>docker-compose up --no-start</code> will be a drop-in replacement for this command.</p><ul><li>Start the ELN containers with</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose up</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>or </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose up -d</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>(the 1st command outputs to stdout, the 2nd starts the ELN as a background service loggin to the docker&#x27;s log daemon)</p><ul><li>after a short startup/migration period, the ELN will available on port <code>&lt;your host IP&gt;:4000</code></li><li>Proceed with the sections <a href="#config-112p220401">Configuring</a> and <a href="#baseurl-112p220401">Setting the Base URL</a></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="upgrade-from-103d01">Upgrade from 1.0.3D0.1<a class="hash-link" href="#upgrade-from-103d01" title="Direct link to heading">​</a></h3><p>To upgrade from a previouse version to this release, a few manual steps have to be done. In the new release, we changed to make use of Docker volumes instead of bind mounts for all user data and shared storages. It is up to the user to transfer previous user data to these volumes.
All you need to do is to copy/merge your old folders to/with the data volume (mounted at <code>/chemotion/data</code> in the ELN container):</p><ul><li><code>./shared/eln/uploads</code> --&gt; <code>/chemotion/data/uploads</code></li><li><code>./shared/eln/public/images</code> --&gt; <code>/chemotion/data/public/images</code></li></ul><p>We recommend the following steps:</p><ul><li>Bring down your current instance, backup everything:</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose down --remove-orphans</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo tar cvzf /tmp/pre-upgrade.tar.gz ./db-data ./shared ./docker-compose.yml</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>In case anything goes wrong, you can always fall back to this backup by simply extracting the archive.</p><ul><li>clean your directory, since the new containers will also write to <code>./shared</code> </li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">rm docker-compose.yml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo mv ./shared ./old</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>download the <code>docker-compose.yml</code>:</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">wget https://raw.githubusercontent.com/ptrxyz/chemotion/main/new-build/release/1.1.2p220401/docker-compose.yml</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>download all images and create the containers, data volumes and networks by running this command in the same folder you downloaded the compose file to:</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose create</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>start a disposable sidecar container with an interactive shell attaching your old data and old db stores in addition to the storages defined in <code>docker-compose.yml</code>:</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -v $(pwd)/old:/old \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           -v chemotion_data:/new \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           -v $(pwd)/db-data:/old/db \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           -v chemotion_db:/new/db \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           -it --rm ubuntu:latest bash</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>You will find yourself in the root of a fresh container. Copy over the following files:</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cp -Rf /old/eln/uploads/.        /new/uploads/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cp -Rf /old/eln/public/images/.  /new/public/images/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cp -Rf /old/db/.                 /new/db/</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Note: the point here is that you copy everything from your old <code>uploads</code> and <code>public/images</code> folder to the new location. By default those are stored in <code>./eln/</code>, if you configured things differently, adjust accordingly.</p><ul><li>Your data is now stored on the data volumes. Type <code>exit</code> to quit the interactive shell.</li><li>start your new instances:</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose up</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>after a short startup/migration period, the ELN will available on port <code>&lt;your host IP&gt;:4000</code></li><li>Proceed with the sections <a href="#config-112p220401">Configuring</a> and <a href="#baseurl-112p220401">Setting the Base URL</a></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="config-112p220401">Configuring<a class="hash-link" href="#config-112p220401" title="Direct link to heading">​</a></h3><p>To keep your new installation clean, we switched to an overlay-based configuration system. The ELN instance will from now on start with (reasonable) defaults and overlay all files found in <code>./shared/pullin/</code> onto the ELN application directory. As an example, to configure a <code>.env</code> file, it&#x27;s filename would be <code>./shared/pullin/.env</code>. Files you might want to configure:</p><ul><li><code>.env</code> --&gt; <code>./shared/pullin/.env</code></li><li><code>database.yml</code> --&gt; <code>./shared/pullin/config/database.yml</code></li><li><code>editors.yml</code> --&gt; <code>./shared/pullin/config/editors.yml</code></li><li><code>welcome-message.md</code> --&gt; <code>./shared/pullin/public/welcome-message.md</code></li><li><code>editors</code>-folder --&gt; <code>./shared/pullin/public/editors</code></li></ul><p>Have a look at the <a href="https://github.com/ComPlat/chemotion_ELN" target="_blank" rel="noopener noreferrer">Complat/Chemotion-GitHub-Repo</a> to get an overview where things need to be placed.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="baseurl-112p220401">Setting the Base-URL<a class="hash-link" href="#baseurl-112p220401" title="Direct link to heading">​</a></h3><p>Please make sure you configure .env to contain at least two settings:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">URL_HOST=&lt;your domain here&gt;:&lt;port&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">URL_PROTOCOL=&lt;http or https&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Since Chemotion sends out links that point to the ELN, it needs to know where the ELN is running. So configure those two variables to make sure the ELN can construct the URLs properly. An example for <code>localhost</code> would look like this:</p><p>(<em>./shared/pullin/.env</em>:)</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">URL_HOST=localhost:4000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">URL_PROTOCOL=http</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Of course, if you are using default ports for your protocol (80 or 443) you can omit the <code>:&lt;port&gt;</code> part and simply use <code>URL_HOST=localhost</code> for example. </p><p>Note: Settings protocol to <code>https</code> requires you to configure TLS on your machine (i.e. with a HTTP proxy like NGINX). It will NOT magically make it work for you. Those settings are simply used to construct URLs.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="other-documentation">Other Documentation<a class="hash-link" href="#other-documentation" title="Direct link to heading">​</a></h3><p>The new version comes with some quality-of-life changes:</p><ul><li>to check the logs of a service, use either <code>docker-compose logs</code> or check the <code>./shared/logs</code> folder.</li><li>to create a backup of your data, you can use the embedded Chemotion CLI tools:</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose exec eln chemotion backup</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This will create a backup in ./shared/backup/</p><ul><li>to restore a backup, clean out your Compose-directory, keep only the backup folder and it&#x27;s files in place.</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose down --remove-orphans       # stop all services</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose run eln chemotion restore   # restore the latest backup</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>Resetting the Administrator account&#x27;s password:</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose exec eln chemotion resetAdminPW</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>Getting a Rails console:</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose exec eln chemotion railsc</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>Getting a shell with loaded Chemotion environment variables:</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose exec eln chemotion shell</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>Drop to Postgres console in the Chemotion database:</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose exec eln chemotion psql</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>Display basic version information:</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose exec eln chemotion info</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="notes-on-backups">Notes on Backups:<a class="hash-link" href="#notes-on-backups" title="Direct link to heading">​</a></h4><p>The backup script is meant to simplify your life a bit when it comes to backups. However it doesn&#x27;t do anything magical and if it suits your needs better, you can also do manual backups. To create on, you need to dump your database, i.e. with <code>pg_dump</code> or by copying the <code>chemotion_db</code> volume when the database is not running.
In addition, you need to safe all your data, that is two folders: <code>/uploads</code> and the <code>/public/images</code> (the latter being more a convenience thing preventing you from having to recreate a lots of thumbnails after restoration). The data is stored on the <code>chemotion_data</code> volume, so you can simply mount it somewhere and use rsync/tar/cp to copy the data. If you already have a container mounting this volume, such as (such as the <code>eln</code> or <code>worker</code> services), you can also simply use <code>docker-compose cp</code> or <code>docker cp</code> to copy the data to the host machine and do anything you like with it.</p><p>To restore a backup, invert the process: While backups can be done with running services, for restoration, you need to stop your services, then playback the SQL-dump (pg_restore/psql/copy the volume or data files back) and then playback the data using cp/tar/rsync/etc.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="version-103d01">Version 1.0.3D0.1<a class="hash-link" href="#version-103d01" title="Direct link to heading">​</a></h2><p>With release <code>1.0.3D0.1</code>, beside upgrading the ELN version to 1.0.3, we made great improvements to the Docker middleware framework. We introduce the concept of <em>configuration landscapes</em> as bundles of configuration files that describe a certain environment. This is a first step to enabling users to easily switch between production, testing or teaching environments with a single command.</p><p>As of now, there is only one landscape shipped with the image and we plan to add more over time depending on user needs. You can always create your own landscapes and quickly move between them. Check out the <code>docker-compose run eln landscape</code> command for more info.</p><p>Further, this changed the config file structure a bit. While in previous versions, the ELN configuration was stored in <code>./shared/config</code> and the container configuration was stored in <code>./config</code>, there is only one folder now: <code>./shared</code>. We hope this change makes it more intuitive for users.</p><p>On the inside, we managed to reduce the size of our images by more than 50% by being more selective when it comes to installed packages: using multistage builds to build the big dependencies makes sure that no build artifacts are unnecessarily present in the final image. To ensure consistency we added a dependency scanner that makes sure that all dependencies are still satisfied and no libraries are missing.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="preparation">Preparation<a class="hash-link" href="#preparation" title="Direct link to heading">​</a></h2><p>To setup the Chemotion ELN using Docker, Docker and Docker-Compose have to be installed on the host machine. Please refer to your distributions documentation on how this can be achieved. For Ubuntu-based machines, this can be found <a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener noreferrer">here</a>.</p><p>In addition you need that latest version of our Docker-Compose service description as well as some scripts depending on your scenario. The file can be found here:</p><table><thead><tr><th>File</th><th>Description</th></tr></thead><tbody><tr><td><a href="https://github.com/ptrxyz/chemotion/blob/main/client-chemotion/docker-compose.yml" target="_blank" rel="noopener noreferrer">docker-compose.yml</a></td><td>service description file</td></tr><tr><td><a href="https://raw.githubusercontent.com/ptrxyz/chemotion/v1.0.3D0.1/client-chemotion/setup.sh" target="_blank" rel="noopener noreferrer">setup.sh</a></td><td>use this script if you plan to setup a new Chemotion ELN instance</td></tr><tr><td><a href="https://raw.githubusercontent.com/ptrxyz/chemotion/v1.0.3D0.1/client-chemotion/upgrade.sh" target="_blank" rel="noopener noreferrer">upgrade.sh</a></td><td>this script shall be used to perform an upgrade of an existing instance from v0.9.1 to v1.0.3</td></tr><tr><td><a href="https://raw.githubusercontent.com/ptrxyz/chemotion/v1.0.3D0.1/client-chemotion/backup.sh" target="_blank" rel="noopener noreferrer">backup.sh</a></td><td>script to backup your data before messing things up</td></tr></tbody></table><p>(For other releases, check out our repository on DockerHub<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup> and the archived installation on Github<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup>)
<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>: Chemotion-Images hosted on <a href="https://hub.docker.com/r/ptrxyz/chemotion/tags?ordering=last_updated" target="_blank" rel="noopener noreferrer">DockerHub</a>
<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup>: Archived Documentation on <a href="https://github.com/ComPlat/chemotion_saurus/blob/026531e75ced4f31ec2da3884e2a9a450e949192/docs/eln/docker-installation.md" target="_blank" rel="noopener noreferrer">Github</a></p><p>Download this file and place it in a separate folder (further referred to as <code>CHEMOTION_PATH</code> as it will contain all the service description but also Chemotion&#x27;s configuration and data files):</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir -p $CHEMOTION_PATH</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd $CHEMOTION_PATH</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -L -O https://raw.githubusercontent.com/ptrxyz/chemotion/v1.0.3D0.1/client-chemotion/docker-compose.yml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -L -O https://raw.githubusercontent.com/ptrxyz/chemotion/v1.0.3D0.1/client-chemotion/backup.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -L -O https://raw.githubusercontent.com/ptrxyz/chemotion/v1.0.3D0.1/client-chemotion/setup.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -L -O https://raw.githubusercontent.com/ptrxyz/chemotion/v1.0.3D0.1/client-chemotion/upgrade.sh</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>As a next step, run the setup script and follow the instructions:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd $CHEMOTION_PATH</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">bash ./setup.sh</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="running-chemotion">Running Chemotion<a class="hash-link" href="#running-chemotion" title="Direct link to heading">​</a></h2><p>You are now ready to run the initialization. Please note that this will create a new database and delete any old database that might exist. Therefore it is curical that you do only run this command if you want to create a new instance of Chemotion.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd $CHEMOTION_PATH</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose run eln landscape deploy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose run eln init</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>As the previous command finishes, you are ready to start Chemotion:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose up</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>You will see the system logs in your terminal and after the start-up you can access your fresh instance using a browser. The application is running on <code>http://localhost:4000</code>, the seeded administration account is <code>ADM</code> (all caps!) with password <code>PleaseChangeYourPassword</code>.</p><p>To start your instance in background mode, use <code>docker-compose up -d</code>.
The services will automatically restart when the docker daemon restarts. This can be configured by removing the lines containing <code>restart: unless-stopped</code> in the <code>docker-compose.yml</code> file or disabling autostart of your docker daemon on your system:</p><div class="codeBlockContainer_I0IT language-docker-compose.yml theme-code-block"><div class="codeBlockContent_wNvx docker-compose.yml"><pre tabindex="0" class="prism-code language-docker-compose.yml codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  db:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  worker:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    restart: unless-stopped</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ...    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  eln:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    restart: unless-stopped</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ...   </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Please refer to the Docker documentation on how this property works: <a href="https://docs.docker.com/config/containers/start-containers-automatically/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/config/containers/start-containers-automatically/</a></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="managing-your-instance">Managing your instance<a class="hash-link" href="#managing-your-instance" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="basic-information">Basic Information<a class="hash-link" href="#basic-information" title="Direct link to heading">​</a></h3><p>To get basic information about your instance, run:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose run eln info</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This will output storage, memory as well as several version information and ensure the fundamentally required runtime is correct.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="getting-a-shell-inside-the-container">Getting a shell inside the container<a class="hash-link" href="#getting-a-shell-inside-the-container" title="Direct link to heading">​</a></h3><p>To get access to the inside of the container, i.e to perform tasks based on the Rails console, one can use the following command:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose run eln shell</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This will drop you to a root shell inside the container. You are now free to perform any administrative tasks in the container context, but be aware that all changes are ephemeral and lost when the container is stopped. To access the host file system, a mount point has to be used, i.e. such as the already configured <code>/shared</code> (which - by default - maps to <code>./shared</code> on the host).</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="backing-up-your-data">Backing up your data<a class="hash-link" href="#backing-up-your-data" title="Direct link to heading">​</a></h2><p>To backup your data, it is sufficient to run the following command on your host machine (not inside the container) in the folder, where your Compose file resides:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo bash ./backup.sh</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p> :::info
It is adviced to setup an automatic system task (i.e. cron job) to backup regularly. This is highly system specific and thus out of the scope of this documentation. Please refer to your OS&#x27;s manual to find out how to setup scheduled tasks.
In addition, you should always backup before upgrading your installation.
:::</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="upgrading">Upgrading<a class="hash-link" href="#upgrading" title="Direct link to heading">​</a></h2><blockquote><p>Note: Before upgrading anything, we highly advice to create a backup (see above)! No backup? no pity!
Note: This upgrade is tailored and tested for the upgrade from 0.9.1 to 1.0.3.
Note: downgrading is not supported.</p></blockquote><p>Stop the services: <code>docker-compose stop --remove-orphans</code></p><p>To upgrade your instance place the new <code>docker-compose.yml</code> and <code>upgrade.sh</code> in the directory where the Chemotion service files reside and run</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo bash ./upgrade.sh</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This will make sure files are properly configured and the database schemes are adjusted if necessary.</p><blockquote><p>Note: Without this step, the containers will refuse to start to prevent any possible damage to your installation.</p></blockquote><p>Now, restart the services: <code>docker-compose restart</code></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="setting-up-a-reverse-proxy">Setting up a Reverse-Proxy<a class="hash-link" href="#setting-up-a-reverse-proxy" title="Direct link to heading">​</a></h3><p>To make the installation available to the public, the container&#x27;s ports should to be forwarded. We suggest to run NGINX as a reverse-proxy either in docker (by extending the Docker-Compose service description file) or stand-alone on the host. The application is (by default) listening on &#x27;0.0.0.0:4000&#x27;.</p><p>A demo service description as well as some sample configuration files for NGINX can be found in the Docker-Chemotion-Monorepo (<a href="https://github.com/ptrxyz/chemotion" target="_blank" rel="noopener noreferrer">https://github.com/ptrxyz/chemotion</a>) in the sub-folder <code>reverse-proxy</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ComPlat/chemotion_saurus/edit/master/docs/eln/docker-installation.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-04-04T19:43:56.000Z">4/4/2022</time></b> by <b>ptrxyz</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/chemotionsaurus/docs/next/eln/native_installation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Native installation</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/chemotionsaurus/docs/next/eln/development_native_installation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Native installation</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#version-112p220401" class="table-of-contents__link toc-highlight">Version 1.1.2p220401</a><ul><li><a href="#fresh-installation" class="table-of-contents__link toc-highlight">Fresh Installation</a></li><li><a href="#upgrade-from-103d01" class="table-of-contents__link toc-highlight">Upgrade from 1.0.3D0.1</a></li><li><a href="#config-112p220401" class="table-of-contents__link toc-highlight">Configuring</a></li><li><a href="#baseurl-112p220401" class="table-of-contents__link toc-highlight">Setting the Base-URL</a></li><li><a href="#other-documentation" class="table-of-contents__link toc-highlight">Other Documentation</a></li></ul></li><li><a href="#version-103d01" class="table-of-contents__link toc-highlight">Version 1.0.3D0.1</a></li><li><a href="#preparation" class="table-of-contents__link toc-highlight">Preparation</a></li><li><a href="#running-chemotion" class="table-of-contents__link toc-highlight">Running Chemotion</a></li><li><a href="#managing-your-instance" class="table-of-contents__link toc-highlight">Managing your instance</a><ul><li><a href="#basic-information" class="table-of-contents__link toc-highlight">Basic Information</a></li><li><a href="#getting-a-shell-inside-the-container" class="table-of-contents__link toc-highlight">Getting a shell inside the container</a></li></ul></li><li><a href="#backing-up-your-data" class="table-of-contents__link toc-highlight">Backing up your data</a></li><li><a href="#upgrading" class="table-of-contents__link toc-highlight">Upgrading</a><ul><li><a href="#setting-up-a-reverse-proxy" class="table-of-contents__link toc-highlight">Setting up a Reverse-Proxy</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/ComPlat/chemotion_ELN" target="_blank" rel="noopener noreferrer" class="footer__link-item">ELN GitHub</a></li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/ComPlat/chemotion_REPO" target="_blank" rel="noopener noreferrer" class="footer__link-item">Repository GitHub</a></li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/chemotionsaurus/about">Contact Us</a></li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/chemotionsaurus/admin">Admin</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Chemotion - KIT. Built with Docusaurus.</div></div></div></footer></div>
<script src="/chemotionsaurus/assets/js/runtime~main.cd4bfac8.js"></script>
<script src="/chemotionsaurus/assets/js/main.63004e89.js"></script>
</body>
</html>